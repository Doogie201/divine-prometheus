---
repos:
  # 1. Core housekeeping hooks
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v5.0.0
    hooks:
      - id: end-of-file-fixer
      - id: trailing-whitespace
      - id: check-yaml
      - id: check-added-large-files
      - id: check-merge-conflict

  # 2. Prettier (JS/TS formatting)
  - repo: https://github.com/pre-commit/mirrors-prettier
    rev: v4.0.0-alpha.8          # point at a real tag or branch
    hooks:
      - id: prettier
        additional_dependencies:
          - prettier@^2.8.0
        files: '\.(js|jsx|ts|tsx|css|html|json|md)$'

  # 3. ESLint (static analysis)
  # .pre-commit-config.yaml
  - repo: https://github.com/pre-commit/mirrors-eslint
    # Use a specific rev for ESLint 9 compatible versions
    # Check mirrors-eslint repo for the latest rev that supports ESLint 9 and its dependencies.
    # You might need to experiment with `rev`.
    # For example, a recent one might be something like:
    rev: v9.2.9 # Or the latest stable tag that bundles ESLint 9
    hooks:
      - id: eslint
        files: \.(js|jsx|ts|tsx|mjs|cjs)$ # Ensure all relevant file types are covered
        types: [file]
        args: [--fix] # Optional: if you want it to auto-fix
        # Crucially, add these additional dependencies
        additional_dependencies:
          - eslint@9.29.0
          - "@eslint/js@9.29.0" # Pin to exact version or use ^9
          - typescript-eslint@^17.0.0 # Or whatever version you're using locally for tseslint
          - globals@^13.0.0
          - eslint-plugin-react-hooks@^4.0.0
          - eslint-plugin-react-refresh@^0.4.0 # If you're using this plugin

  # 4. TypeScript type-check
  - repo: local
    hooks:
      - id: tsc
        name: TypeScript type-check
        language: node
        entry: npx tsc -p tsconfig.json --noEmit
        pass_filenames: false        # tsc works on the whole project
        additional_dependencies:
          - "typescript@^5"

  # 5. Conventional-Commits lint on commit-msgs
  - repo: https://github.com/jorisroovers/gitlint
    rev: v0.19.1
    hooks:
      - id: gitlint

  # - repo: https://github.com/belak/pre-commit-node-ts
  #   rev: v1.5.0
  #   hooks:
  #     - id: ts-typecheck
  #       additional_dependencies:
  #         - "typescript@^5"
  #         - "@types/react@^18"
